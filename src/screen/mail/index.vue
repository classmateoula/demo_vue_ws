<template>
  <div class="box bg-f3">
    <luo-header title="通讯录" search :left="false" right></luo-header>
    <luo-list title="新的朋友" bottom @change="$router.push('/friend')">
      <svg t="1563378092130" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11458" width=".2rem" height=".2rem"><path d="M0 0m102.4 0l819.2 0q102.4 0 102.4 102.4l0 819.2q0 102.4-102.4 102.4l-819.2 0q-102.4 0-102.4-102.4l0-819.2q0-102.4 102.4-102.4Z" fill="#F67016" p-id="11459"></path><path d="M331.0336 330.9056a133.1968 133.1968 0 1 0 266.3936 0 133.4016 133.4016 0 0 0-266.3936 0zM204.8 748.7744c0 5.3248 0.4096 15.5648 0.4096 15.5648h350.1056v-79.1552a44.288 44.288 0 0 1 38.5536-43.6736h31.5648v-41.7536a31.2576 31.2576 0 0 1 29.7216-25.6 262.2208 262.2208 0 0 0-189.2864-69.12c-175.2576 0-261.0688 106.8544-261.0688 243.7376z m487.9104-134.5536a24.9856 24.9856 0 0 0-25.2416 24.5504v43.6736H622.592a24.9856 24.9856 0 0 0-25.2416 24.5504v32.768a24.9856 24.9856 0 0 0 25.2416 24.5504h44.8768v43.6736a24.9856 24.9856 0 0 0 25.2416 24.5504h33.664a24.9856 24.9856 0 0 0 25.2416-24.5504v-43.648h44.8768a24.9856 24.9856 0 0 0 25.2416-24.5504v-32.768a24.9856 24.9856 0 0 0-25.2416-24.5504h-44.9024v-43.6992a24.9856 24.9856 0 0 0-25.2416-24.5504z" fill="#FFFFFF" p-id="11460"></path></svg>
    </luo-list>
    <luo-list title="群聊" bottom>
      <svg t="1563378160728" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12826" width=".2rem" height=".2rem"><path d="M64 64v896h896V64H64z m603.7 698H197.1c-8.9 0-15.9-7.6-15.3-16.5 6.8-94.8 72.2-175.2 161.9-208.3-35.8-26.4-59.9-70.8-59.9-122.1 0-83.2 65.3-153.2 147.7-153.2 80.9 0 150.1 70 150.1 153.2 0 51.3-24.9 95.6-66.9 122.1 95.6 33.1 161.3 113.5 168.2 208.3 0.7 8.9-6.3 16.5-15.2 16.5z m159.3 0h-97c-8 0-14.6-6.3-15.1-14.2-5.1-92.1-60.1-173-148.9-215.9 30.3-28.8 48.2-73.1 48.2-116.6 0-12.6-2.7-26.4-5.1-38.3-1.7-8.4 3.8-16.5 12.2-17.9 5.4-0.9 11.1-1.3 17-1.3 70 0 122.1 54.4 122.1 123.6 0 33.4-20.2 76.2-50.5 98.8 72.5 25.4 125.5 90 132.2 165.5 0.9 8.7-6.2 16.3-15.1 16.3z" fill="#07BC05" p-id="12827"></path></svg>
    </luo-list>
    <luo-list title="标签" bottom>
      <svg t="1563378293126" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21501" width=".2rem" height=".2rem"><path d="M0 0m153.6 0l716.8 0q153.6 0 153.6 153.6l0 716.8q0 153.6-153.6 153.6l-716.8 0q-153.6 0-153.6-153.6l0-716.8q0-153.6 153.6-153.6Z" fill="#375a91" p-id="21502"></path><path d="M717.312 309.248L870.4 512l-153.088 202.752c-12.5952 16.7936-33.6384 27.648-57.088 27.648l-385.3824-0.3072c-38.5024 0-70.0416-29.3376-70.0416-65.536V347.4432c0-36.1984 31.5392-65.536 70.0416-65.536l385.3824-0.3072c23.4496 0 44.4928 10.8544 57.088 27.648zM640 588.8a76.8 76.8 0 1 0 0-153.6 76.8 76.8 0 0 0 0 153.6z" fill="#FFFFFF" p-id="21503"></path></svg>
    </luo-list>
    <luo-list title="公众号">
      <svg t="1563378361734" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="22261" width=".2rem" height=".2rem"><path d="M487.780185 8.021051c10.778288-10.778288 32.334863-10.778288 43.113151 0L665.621933 142.874977h188.620035c16.167432 0 26.945719 10.778288 26.945719 26.945719V358.440732l134.728597 134.728597c10.778288 10.778288 10.778288 26.945719 0 37.724007L881.187687 665.621933v188.620035c0 16.167432-10.778288 26.945719-26.945719 26.945719H665.621933L530.893336 1015.916284c-10.778288 10.778288-26.945719 10.778288-37.724007 0L358.440732 881.187687H169.820696c-16.167432 0-26.945719-10.778288-26.945719-26.945719V665.621933L8.021051 530.893336c-10.778288-10.778288-10.778288-32.334863 0-43.113151L142.874977 353.051588V169.820696c0-16.167432 10.778288-26.945719 26.945719-26.945719H358.440732L487.780185 8.021051z m-102.393734 177.967077c-5.389144 5.389144-10.778288 10.778288-16.167431 10.778288H196.766416v172.452604c0 5.389144-5.389144 16.167432-5.389144 21.556575l-123.950309 118.561165 123.950309 123.950309c5.389144 5.389144 5.389144 10.778288 5.389144 21.556576v172.452604h172.452604c5.389144 0 16.167432 5.389144 21.556575 5.389144l123.950309 123.950309 123.950309-123.950309c5.389144-5.389144 10.778288-5.389144 21.556576-5.389144h172.452604V654.843645c0-5.389144 5.389144-16.167432 5.389143-21.556576l123.950309-123.950309-123.950309-123.950309c-5.389144-5.389144-5.389144-10.778288-5.389143-21.556575V196.766416H660.232789c-5.389144 0-16.167432-5.389144-21.556576-5.389144L509.33676 67.426963l-123.950309 118.561165z m0 0" p-id="22262" fill="#98c6ff"></path><path d="M347.662444 455.445322c-5.389144-10.778288-26.945719-10.778288-37.724007 0-10.778288 10.778288-10.778288 26.945719 0 37.724007l145.506885 145.506884c10.778288 5.389144 26.945719 5.389144 37.724007-5.389144L714.124227 412.332171c10.778288-10.778288 10.778288-26.945719 0-37.724007-10.778288-10.778288-26.945719-10.778288-37.724007 0L471.612753 579.395631l-123.950309-123.950309z m0 0" p-id="22263" fill="#4c725e"></path></svg>
    </luo-list>
    <p class="pad-n10">
      <span class="mg-l10 color-black font-mini">我的企业</span>
    </p>
    <luo-list title="我的企业" class="">
      <svg t="1563378597454" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23012" width=".2rem" height=".2rem"><path d="M352 288h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z m0 128h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z m0 128h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z m0 128h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z m192-384h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z m0 128h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z m0 128h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z m0 128h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z" p-id="23013" fill="#98c6ff"></path><path d="M960 864h-64V288a64 64 0 0 0-64-64H704v-64a64 64 0 0 0-64-64H192a64 64 0 0 0-64 64v704H64a32 32 0 0 0 0 64h896a32 32 0 0 0 0-64z m-768 0V160h448v704H192z m512 0V288h128v576H704z" p-id="23014" fill="#98c6ff"></path></svg>
    </luo-list>
    <p class="pad-n10">
      <span class="mg-l10 color-black font-mini">我的好友</span>
    </p>
    <luo-list
      v-for="item in dataList"
      :key="item.uid"
      :title="item.uname"
      @change="navToRoom(item)"
    >
      <el-image :src="item.avatar"></el-image>
    </luo-list>
  </div>
</template>

<script>
import { get_friend_list } from '@/api/user'
import { post_room_add } from '@/api/room'

export default {
  name: 'mail',
  data () {
    return {
      msg: '获取好友列表',
      dataList: null,
    }
  },
  methods: {
    // 刷新
    load () {
      console.log('刷新')
    },
    // 进入房间
    navToRoom (row) {
      post_room_add({
        uid: row.uid,
        uname: row.uname,
        img: row.avatar
      }).then(res => {
        if (res.code === 200) {
          this.$router.push({
            name: 'room',
            path: '/room',
            params: { rid: res.info }
          })
        }
      })
    },
    // 获取好友列表
    getDataList () {
      get_friend_list({
        user_ids: this.$store.state.userInfo.user_ids
      }).then(res => {
        if (res.code === 200) {
          this.dataList = res.info
        }
      })
    }
  },
  created () {
    this.getDataList()
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped lang='scss'>
</style>
